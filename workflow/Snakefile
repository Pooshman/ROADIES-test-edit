from snakemake.utils import min_version
min_version("7.12.1")
configfile: "config/config.yaml"
SAMPLES = glob_wildcards(config["GENOMES"]+"/{samples}.fa").samples
num = config["GENE_COUNT"]
IDS = list(range(1,num+1))

if (config["MSA"] == "mashtree"):
	include: "rules/mashtree.smk"
elif (config["MSA"] == "fasttree"):
	include: "rules/align.smk"
	include: "rules/astral.smk"
	include: "rules/sampling.smk"
	include: "rules/fasttree.smk"
else:
	include: "rules/align.smk"
	include: "rules/astral.smk"
	include: "rules/sampling.smk"
	include: "rules/tree.smk"
	
rule all:
	input:
		config["OUT_DIR"]+"/roadies.nwk"
		#config["OUT"]+"/geneTree/gene_tree_merged.newick"
		# expand(config["OUT"]+"/geneTree/gene_tree_{id}.newick",id=IDS)
		# expand(config["OUT"]+"/msa/gene_aln_{id}.fa",id=IDS)
		#expand(config["OUT"]+"/msa/gene_aln_{id}.treefile",id=IDS)
		#expand(config["OUT"]+"/genes/gene_{id}.fa",id=IDS)
